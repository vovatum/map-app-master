(this["webpackJsonpmap-app"]=this["webpackJsonpmap-app"]||[]).push([[0],{15:function(e,t,n){},42:function(e,t,n){},66:function(e,t,n){"use strict";n.r(t);var r=n(1),c=n(0),a=n.n(c),o=n(16),i=n.n(o),s=(n(42),n(9)),u=(n(15),n(2)),l=n(6),d=n(8),p=[{id:"Country",name:""},{id:"City",name:""}],j=function(e,t){return{type:"ADD_LOCATION_NAME",id:e,name:t}},f=a.a.memo((function(e){var t=Object(l.b)(),n=Object(c.useState)(e.value),a=Object(s.a)(n,2),o=a[0],i=a[1],u=Object(c.useState)(null),d=Object(s.a)(u,2),p=d[0],f=d[1],h=function(e){"Enter"===e.key&&null===p?""!==o.trim()?(i(""),f(null)):(i(""),f("Name is required")):(f(null),v())},b=function(){f(null),v()},v=function(){""===e.value.trim()&&t(j(e.id,""))};return null===p?Object(r.jsx)("input",{className:"formCity input",type:"text",placeholder:e.placeholder,value:e.value,onKeyPress:h,onChange:function(n){t(j(e.id,n.currentTarget.value)),i(n.currentTarget.value)},onBlur:v}):Object(r.jsx)("input",{className:"error",value:p,onClick:b,onChange:b,onKeyPress:h,onBlur:b})})),h=n(13),b=n(7),v=n.n(b),m=n(11),O=n(18),g=n.n(O),x=g.a.create({baseURL:"https://geocode-maps.yandex.ru/1.x/"}),w=function(){var e=Object(m.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.get("?format=json&geocode=".concat(t,"&apikey=").concat("cf257613-388c-495a-989f-98c40a840056"));case 2:return e.abrupt("return",e.sent.data.response);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=g.a.create({baseURL:"https://search-maps.yandex.ru/v1/"}),C=function(){var e=Object(m.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.get("?text=".concat(t," \u043e\u0431\u0443\u0447\u0435\u043d\u0438\u0435 \u043f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044e, it \u0448\u043a\u043e\u043b\u0430&results=100&lang=ru_RU&apikey=").concat("2fabdc58-1495-4a84-afef-ac1bc6f1f91c"));case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k={cityCoordinates:[53.9,27.56],schools:[{geometry:{coordinates:[1,2],type:""},properties:{},type:""}]},N=function(e,t){return{type:"GET_CITY_COORDINATES",cityCoordinates:e,schools:t}},T=function(e,t){return function(){var n=Object(m.a)(v.a.mark((function n(r){var c,a,o;return v.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c=new RegExp(["\u0441\u0440\u0435\u0434\u043d\u044f\u044f","\u0433\u0438\u043c\u043d\u0430\u0437\u0438\u044f"].join("|"),"i"),n.next=4,w(e+" "+t);case 4:return a=n.sent.GeoObjectCollection.featureMember[0].GeoObject.Point.pos.split(" ").reverse().map((function(e){return+e})),n.next=7,C(e+" "+t);case 7:o=n.sent.features.filter((function(e){return!e.properties.name.toLowerCase().match(c)})).map((function(e){return Object(d.a)(Object(d.a)({},e),{},{coordinates:e.geometry.coordinates.reverse()})})),r(N(a,o));case 9:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},S=a.a.memo((function(e){var t=Object(l.c)((function(e){return e.inputData})),n=Object(l.b)();return Object(r.jsxs)("form",{className:"formWrapper",children:[Object(r.jsx)("div",{className:"formName",children:"Name"}),t.map((function(e){return Object(r.jsxs)("div",{className:"form"+e.id,children:[Object(r.jsx)("div",{children:e.id}),Object(r.jsx)(f,{id:e.id,value:e.name,placeholder:"E"+"nter your ".concat(e.id).toLowerCase()},e.id)]})})),Object(r.jsxs)("div",{children:[Object(r.jsx)(h.b,{to:"/yandexMap",children:Object(r.jsx)("button",{className:"btnFormSearch",onClick:function(){var r=t[0].name,c=t[1].name;n(""===r&&""===c?T("Belarus","Minsk"):T(r,c)),e.redirectFunc()},children:"Search"})}),e.doRedirectFunc()]}),Object(r.jsx)("div",{})]})})),A=n(19);var D=function(){return Object(r.jsx)("div",{className:"listWrapper",children:Object(r.jsxs)("div",{className:"schoolItem",children:[Object(r.jsx)("div",{children:"SchoolName"}),Object(r.jsx)("div",{children:"Rating"}),Object(r.jsx)("div",{children:"Address"}),Object(r.jsx)("div",{children:"Work Time"}),Object(r.jsx)("div",{children:"Telephone"})]})})},E=a.a.memo((function(e){var t=Object(l.c)((function(e){return e.cityData.cityCoordinates})),n=Object(l.c)((function(e){return e.cityData.schools})),a=Object(c.useState)("Map view"),o=Object(s.a)(a,2),i=o[0],u=o[1];return Object(r.jsxs)("div",{children:[Object(r.jsx)("button",{onClick:function(){return u("Map view"===i?"List view":"Map view")},children:i}),Object(r.jsx)(A.c,{children:Object(r.jsx)("div",{className:"mapWrapper",children:"Map view"===i?Object(r.jsx)(A.a,{state:{center:t,zoom:12},width:"100%",height:"100vh",modules:["geoObject.addon.balloon","geoObject.addon.hint"],children:n.map((function(e){return Object(r.jsx)(A.b,{geometry:e.geometry.coordinates,properties:{iconCaption:e.properties.name,balloonContentHeader:e.properties.name,balloonContentBody:e.properties.description,hintContent:e.properties.name},options:{preset:"islands#blueLeisureIcon",hideIconOnBalloonOpen:!1}})}))}):Object(r.jsx)(D,{})})})]})}));var L=function(){var e=Object(c.useState)(!1),t=Object(s.a)(e,2),n=t[0],a=t[1];return Object(r.jsx)("div",{className:"App",children:Object(r.jsx)(S,{redirectFunc:function(){a(!0)},doRedirectFunc:function(){if(n)return Object(r.jsx)(u.a,{path:"/yandexMap",render:function(){return Object(r.jsx)(E,{})}})}})})},W=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,67)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),r(e),c(e),a(e),o(e)}))},I=n(12),M=n(36),R=Object(I.c)({cityData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_CITY_COORDINATES":return Object(d.a)(Object(d.a)({},e),{},{cityCoordinates:t.cityCoordinates,schools:t.schools});default:return e}},inputData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_LOCATION_NAME":return e.map((function(e){return e.id===t.id?Object(d.a)(Object(d.a)({},e),{},{name:t.name}):e}));default:return e}}}),F=Object(I.d)(R,Object(I.a)(M.a));window.store=F;var _=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function B(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}i.a.render(Object(r.jsx)(h.a,{children:Object(r.jsx)(l.a,{store:F,children:Object(r.jsx)(L,{})})}),document.getElementById("root")),W(),function(e){if("serviceWorker"in navigator){if(new URL("/map-app-master",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/map-app-master","/service-worker.js");_?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var r=n.headers.get("content-type");404===n.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):B(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):B(t,e)}))}}()}},[[66,1,2]]]);
//# sourceMappingURL=main.b0fc7469.chunk.js.map