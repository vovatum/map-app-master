(this["webpackJsonpmap-app"]=this["webpackJsonpmap-app"]||[]).push([[0],{21:function(e,t,n){},42:function(e,t,n){},66:function(e,t,n){"use strict";n.r(t);var r=n(1),c=n(0),a=n.n(c),o=n(15),i=n.n(o),s=(n(42),n(14)),u=(n(21),n(2)),d=n(6),l=n(8),p=[{id:"Country",name:""},{id:"City",name:""}],j=function(e,t){return{type:"ADD_LOCATION_NAME",id:e,name:t}},b=a.a.memo((function(e){var t=Object(d.b)(),n=Object(c.useState)(e.value),a=Object(s.a)(n,2),o=a[0],i=a[1],u=Object(c.useState)(null),l=Object(s.a)(u,2),p=l[0],b=l[1],f=function(e){"Enter"===e.key&&null===p?""!==o.trim()?(i(""),b(null)):(i(""),b("Name is required")):(b(null),O())},m=function(){b(null),O()},O=function(){""===e.value.trim()&&t(j(e.id,""))};return null===p?Object(r.jsx)("input",{className:"formCity input",type:"text",placeholder:e.placeholder,value:e.value,onKeyPress:f,onChange:function(n){t(j(e.id,n.currentTarget.value)),i(n.currentTarget.value)},onBlur:O}):Object(r.jsx)("input",{className:"error",value:p,onClick:m,onChange:m,onKeyPress:f,onBlur:m})})),f=n(12),m=n(7),O=n.n(m),h=n(10),v=n(17),x=n.n(v),y=x.a.create({baseURL:"https://geocode-maps.yandex.ru/1.x/"}),C=function(){var e=Object(h.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.get("?format=json&geocode=".concat(t,"&apikey=").concat("cf257613-388c-495a-989f-98c40a840056"));case 2:return e.abrupt("return",e.sent.data.response);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=x.a.create({baseURL:"https://search-maps.yandex.ru/v1/"}),N=function(){var e=Object(h.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.get("?text=".concat(t," \u043e\u0431\u0443\u0447\u0435\u043d\u0438\u0435 \u043f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044e, it \u0448\u043a\u043e\u043b\u0430&results=100&lang=ru_RU&apikey=").concat("2fabdc58-1495-4a84-afef-ac1bc6f1f91c"));case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w={cityCoordinates:[53.9,27.56],schools:[{geometry:{coordinates:[1,2],type:""},properties:{},type:""}]},D=function(e,t){return{type:"GET_CITY_COORDINATES",cityCoordinates:e,schools:t}},T=function(e,t){return function(){var n=Object(h.a)(O.a.mark((function n(r){var c,a,o;return O.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c=new RegExp(["\u0441\u0440\u0435\u0434\u043d\u044f\u044f","\u0433\u0438\u043c\u043d\u0430\u0437\u0438\u044f"].join("|"),"i"),n.next=4,C(e+" "+t);case 4:return a=n.sent.GeoObjectCollection.featureMember[0].GeoObject.Point.pos.split(" ").reverse().map((function(e){return+e})),n.next=7,N(e+" "+t);case 7:o=n.sent.features.filter((function(e){return!e.properties.name.toLowerCase().match(c)})).map((function(e){return Object(l.a)(Object(l.a)({},e),{},{coordinates:e.geometry.coordinates.reverse()})})),r(D(a,o));case 9:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},k=a.a.memo((function(e){var t=Object(d.c)((function(e){return e.inputData})),n=Object(d.b)();return Object(r.jsxs)("form",{className:"formWrapper",children:[Object(r.jsx)("div",{className:"formName",children:"Name"}),t.map((function(e){return Object(r.jsxs)("div",{className:"form"+e.id,children:[Object(r.jsx)("div",{children:e.id}),Object(r.jsx)(b,{id:e.id,value:e.name,placeholder:"E"+"nter your ".concat(e.id).toLowerCase()},e.id)]})})),Object(r.jsxs)("div",{children:[Object(r.jsx)(f.b,{to:"/yandexMap",children:Object(r.jsx)("button",{className:"btnFormSearch",onClick:function(){var r=t[0].name,c=t[1].name;n(""===r&&""===c?T("Belarus","Minsk"):T(r,c)),e.redirectFunc()},children:"Search"})}),e.doRedirectFunc()]}),Object(r.jsx)("div",{})]})})),E=n(18),I=a.a.memo((function(e){var t=Object(d.c)((function(e){return e.cityData.cityCoordinates})),n=Object(d.c)((function(e){return e.cityData.schools}));return Object(r.jsx)("div",{children:Object(r.jsx)(E.c,{children:Object(r.jsx)("div",{className:"mapWrapper",children:Object(r.jsx)(E.a,{state:{center:t,zoom:12},width:"100%",height:"100vh",modules:["geoObject.addon.balloon","geoObject.addon.hint"],children:n.map((function(e){return Object(r.jsx)(E.b,{geometry:e.geometry.coordinates,properties:{iconCaption:e.properties.name,balloonContentHeader:e.properties.name,balloonContentBody:e.properties.description,hintContent:e.properties.name},options:{preset:"islands#blueLeisureIcon",hideIconOnBalloonOpen:!1}})}))})})})})}));var A=function(){var e=Object(c.useState)(!1),t=Object(s.a)(e,2),n=t[0],a=t[1];return Object(r.jsx)("div",{className:"App",children:Object(r.jsx)(k,{redirectFunc:function(){a(!0)},doRedirectFunc:function(){if(n)return Object(r.jsx)(u.a,{path:"/yandexMap",render:function(){return Object(r.jsx)(I,{})}})}})})},F=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,67)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),r(e),c(e),a(e),o(e)}))},L=n(11),_=n(36),R=Object(L.c)({cityData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_CITY_COORDINATES":return Object(l.a)(Object(l.a)({},e),{},{cityCoordinates:t.cityCoordinates,schools:t.schools});default:return e}},inputData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_LOCATION_NAME":return e.map((function(e){return e.id===t.id?Object(l.a)(Object(l.a)({},e),{},{name:t.name}):e}));default:return e}}}),S=Object(L.d)(R,Object(L.a)(_.a));window.store=S,i.a.render(Object(r.jsx)(f.a,{children:Object(r.jsx)(d.a,{store:S,children:Object(r.jsx)(A,{})})}),document.getElementById("root")),F()}},[[66,1,2]]]);
//# sourceMappingURL=main.51914635.chunk.js.map