(this["webpackJsonpmap-app"]=this["webpackJsonpmap-app"]||[]).push([[0],{15:function(e,n,t){},42:function(e,n,t){},66:function(e,n,t){"use strict";t.r(n);var r=t(1),o=t(0),a=t.n(o),c=t(16),i=t.n(c),s=(t(42),t(9)),u=(t(15),t(2)),l=t(6),d=t(8),p=[{id:"Country",name:""},{id:"City",name:""}],f=function(e,n){return{type:"ADD_LOCATION_NAME",id:e,name:n}},h=a.a.memo((function(e){var n=Object(l.b)(),t=Object(o.useState)(e.value),a=Object(s.a)(t,2),c=a[0],i=a[1],u=Object(o.useState)(null),d=Object(s.a)(u,2),p=d[0],h=d[1],j=function(n){"Enter"===n.key&&null===p?(""!==c.trim()?(i(""),h(null)):(i(""),h("Name is required")),e.onKeyPressHandler(e.id,n.key)):(h(null),m())},b=function(){h(null),m()},m=function(){""===e.value.trim()&&n(f(e.id,""))};return null===p?Object(r.jsx)("input",{className:"formCity input",type:"text",placeholder:e.placeholder,value:e.value,onKeyPress:j,onChange:function(n){e.onChangeHandler(e.id,n.currentTarget.value),i(n.currentTarget.value)},onBlur:m}):Object(r.jsx)("input",{className:"error",value:p,onClick:b,onChange:b,onKeyPress:j,onBlur:b})})),j=t(13),b=t(7),m=t.n(b),v=t(11),O=t(18),g=t.n(O),w=g.a.create({baseURL:"https://geocode-maps.yandex.ru/1.x/"}),x=function(){var e=Object(v.a)(m.a.mark((function e(n){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.get("?format=json&geocode=".concat(n,"&apikey=").concat("cf257613-388c-495a-989f-98c40a840056"));case 2:return e.abrupt("return",e.sent.data.response);case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),y=g.a.create({baseURL:"https://search-maps.yandex.ru/v1/"}),C=function(){var e=Object(v.a)(m.a.mark((function e(n){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.get("?text=".concat(n," \u043e\u0431\u0443\u0447\u0435\u043d\u0438\u0435 \u043f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044e, it \u0448\u043a\u043e\u043b\u0430&results=100&lang=ru_RU&apikey=").concat("2fabdc58-1495-4a84-afef-ac1bc6f1f91c"));case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),k={cityCoordinates:[53.9,27.56],schools:[{geometry:{coordinates:[1,2],type:""},properties:{name:{},description:null},type:""}]},N=function(e,n){return{type:"GET_CITY_COORDINATES",cityCoordinates:e,schools:n}},T=function(e,n){return function(){var t=Object(v.a)(m.a.mark((function t(r){var o,a,c;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=new RegExp(["\u0441\u0440\u0435\u0434\u043d\u044f\u044f","\u0433\u0438\u043c\u043d\u0430\u0437\u0438\u044f"].join("|"),"i"),t.next=4,x(e+" "+n);case 4:return a=t.sent.GeoObjectCollection.featureMember[0].GeoObject.Point.pos.split(" ").reverse().map((function(e){return+e})),t.next=7,C(e+" "+n);case 7:c=t.sent.features.filter((function(e){return!e.properties.name.toLowerCase().match(o)})).map((function(e){return Object(d.a)(Object(d.a)({},e),{},{coordinates:e.geometry.coordinates.reverse()})})),r(N(a,c));case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},S=a.a.memo((function(e){var n=Object(l.c)((function(e){return e.inputData})),t=Object(l.b)(),o=function(e,n){t(f(e,n))},a=function(e,n){return c()},c=function(){var r=n[0].name.trim(),o=n[1].name.trim();t(""===r&&""===o?T("Belarus","Minsk"):T(r,o)),e.redirectFunc()};return Object(r.jsxs)("form",{className:"formWrapper",children:[Object(r.jsx)("div",{className:"formName",children:"Name"}),n.map((function(e){return Object(r.jsxs)("div",{className:"form"+e.id,children:[Object(r.jsx)("div",{children:e.id}),Object(r.jsx)(h,{id:e.id,value:e.name,placeholder:"E"+"nter your ".concat(e.id).toLowerCase(),onChangeHandler:o,onKeyPressHandler:a},e.id)]})})),Object(r.jsxs)("div",{children:[Object(r.jsx)(j.b,{to:"/yandexMap",children:Object(r.jsx)("button",{className:"btnFormSearch",onClick:c,children:"Search"})}),e.doRedirectFunc()]}),Object(r.jsx)("div",{})]})})),A=t(19);var D=function(e){return console.log(e.schools),Object(r.jsx)("div",{className:"listWrapper",children:Object(r.jsx)("div",{className:"schoolItem",children:e.schools.map((function(e){return Object(r.jsxs)("div",{children:["-",e.properties.name,",",e.properties.description,","]})}))})})},E=a.a.memo((function(){var e=Object(l.c)((function(e){return e.cityData.cityCoordinates})),n=Object(l.c)((function(e){return e.cityData.schools})),t=Object(o.useState)("Map view"),a=Object(s.a)(t,2),c=a[0],i=a[1];return Object(r.jsxs)("div",{children:[Object(r.jsx)("button",{onClick:function(){return i("Map view"===c?"List view":"Map view")},children:"Change view"}),Object(r.jsx)(A.c,{children:Object(r.jsx)("div",{className:"mapWrapper",children:"Map view"===c?Object(r.jsx)(A.a,{state:{center:e,zoom:12},width:"100%",height:"100vh",modules:["geoObject.addon.balloon","geoObject.addon.hint"],children:n.map((function(e){return Object(r.jsx)(A.b,{geometry:e.geometry.coordinates,properties:{iconCaption:e.properties.name,balloonContentHeader:e.properties.name,balloonContentBody:e.properties.description,hintContent:e.properties.name},options:{preset:"islands#blueLeisureIcon",hideIconOnBalloonOpen:!1}})}))}):Object(r.jsx)(D,{schools:n})})})]})}));var L=function(){var e=Object(o.useState)(!1),n=Object(s.a)(e,2),t=n[0],a=n[1];return Object(r.jsx)("div",{className:"App",children:Object(r.jsx)(S,{redirectFunc:function(){a(!0)},doRedirectFunc:function(){if(t)return Object(r.jsx)(u.a,{path:"/yandexMap",render:function(){return Object(r.jsx)(E,{})}})}})})},I=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,67)).then((function(n){var t=n.getCLS,r=n.getFID,o=n.getFCP,a=n.getLCP,c=n.getTTFB;t(e),r(e),o(e),a(e),c(e)}))},W=t(12),M=t(36),F=Object(W.c)({cityData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"GET_CITY_COORDINATES":return Object(d.a)(Object(d.a)({},e),{},{cityCoordinates:n.cityCoordinates,schools:n.schools});default:return e}},inputData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"ADD_LOCATION_NAME":return e.map((function(e){return e.id===n.id?Object(d.a)(Object(d.a)({},e),{},{name:n.name}):e}));default:return e}}}),P=Object(W.d)(F,Object(W.a)(M.a));window.store=P;var R=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function _(e,n){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;null!=t&&(t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),n&&n.onUpdate&&n.onUpdate(e)):(console.log("Content is cached for offline use."),n&&n.onSuccess&&n.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}i.a.render(Object(r.jsx)(j.a,{children:Object(r.jsx)(l.a,{store:P,children:Object(r.jsx)(L,{})})}),document.getElementById("root")),I(),function(e){if("serviceWorker"in navigator){if(new URL("/map-app-master",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var n="".concat("/map-app-master","/service-worker.js");R?(!function(e,n){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(t){var r=t.headers.get("content-type");404===t.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):_(e,n)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(n,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):_(n,e)}))}}()}},[[66,1,2]]]);
//# sourceMappingURL=main.3611c2b6.chunk.js.map